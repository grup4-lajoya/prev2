<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login</title>
<style>
  body { font-family: Arial, sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background: #f0f0f0; }
  #loginForm { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); width: 300px; }
  h2 { text-align: center; margin-bottom: 20px; }
  input { display: block; width: 100%; margin: 10px 0; padding: 8px; border-radius: 4px; border: 1px solid #ccc; }
  button { width: 100%; padding: 10px; background: #0056b3; color: white; border: none; border-radius: 4px; cursor: pointer; }
  button:hover { background: #004494; }
</style>
</head>
<body>

<form id="loginForm">
  <h2>Iniciar Sesión</h2>
  <input type="text" id="usuario" placeholder="Usuario" required>
  <input type="password" id="clave" placeholder="Clave" required>
  <button type="submit">Ingresar</button>
</form>

<script>
document.getElementById("loginForm").addEventListener("submit", async function(e){
  e.preventDefault();

  const usuario = document.getElementById("usuario").value.trim();
  const clave = document.getElementById("clave").value.trim();

  // URL de tu Web App de Apps Script
  const url = "https://script.google.com/macros/s/AKfycbxv9MA2tQmda4RigzSs-K9h0WTXjCXAfK642SzE6k6KobWInbRy0KsvAnxcw_6V-Iut/exec";
  try {
    const response = await fetch(url, {
      method: "POST",
      body: new URLSearchParams({usuario, clave})
    });

    const result = await response.json();

    if(result.success){
      // Guardar info del usuario para usar en dashboard
      localStorage.setItem("usuario", usuario);
      localStorage.setItem("rol", result.rol);
      localStorage.setItem("correo", result.correo);

      // Redireccionar al dashboard
      window.location.href = "https://msilva-ux.github.io/prev2/#";
    } else {
      alert("Usuario o clave incorrectos");
    }
  } catch(err){
    console.error(err);
    alert("Error de conexión. Intente nuevamente.");
  }
});
</script>

</body>
</html>


