<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CONSULTA DE INFORMES DE PELIGROS POTENCIALES E INCIDENTES</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f6f9;
      margin: 0;
      padding: 0;
    }

    .container {
      width: 95%;
      max-width: 1600px;
      margin: 20px auto;
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0px 4px 10px rgba(0,0,0,0.1);
    }

    h1 {
      text-align: center;
      font-size: 1.8rem;
      margin-bottom: 20px;
      color: #003366;
      text-transform: uppercase;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    th, td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: left;
      vertical-align: top;
    }

    th {
      background-color: #003366;
      color: white;
      font-size: 0.9rem;
      text-transform: uppercase;
    }

    td {
      font-size: 0.9rem;
    }

    /* Ajustes de ancho */
    th:nth-child(2), td:nth-child(2) { width: 180px; } /* FECHA Y HORA */
    th:nth-child(3), td:nth-child(3) { width: 250px; } /* ASUNTO */
    th:nth-child(4), td:nth-child(4) { width: 300px; } /* LUGAR */
    th:nth-child(5), td:nth-child(5) { width: 300px; } /* DESCRIPCIÓN */
    th:nth-child(6), td:nth-child(6) { width: 250px; } /* RECOMENDACIONES */
    th:nth-child(8), td:nth-child(8) { width: 280px; } /* ACCIONES TOMADAS */

    tr:nth-child(even) {
      background-color: #f9f9f9;
    }

    .icono {
      cursor: pointer;
      color: #007bff;
      text-decoration: underline;
    }

    textarea {
      width: 100%;
      min-height: 60px;
      resize: vertical;
      padding: 8px;
      font-size: 0.9rem;
    }

    select, button {
      padding: 6px 10px;
      font-size: 0.9rem;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    button {
      background-color: #003366;
      color: white;
      border: none;
      cursor: pointer;
    }

    button:hover {
      background-color: #0055aa;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>CONSULTA DE INFORMES DE PELIGROS POTENCIALES E INCIDENTES</h1>
    <table>
      <thead>
        <tr>
          <th>N°</th>
          <th>FECHA Y HORA</th>
          <th>ASUNTO</th>
          <th>LUGAR DEL ACTO O CONDICIÓN INSEGURA</th>
          <th>DESCRIPCIÓN</th>
          <th>RECOMENDACIONES</th>
          <th>REPORTA</th>
          <th>IMÁGENES</th>
          <th>ESTADO</th>
          <th>ACCIONES TOMADAS</th>
          <th>ACCIÓN</th>
        </tr>
      </thead>
      <tbody id="tabla-datos">
        <!-- Aquí se cargarán los registros -->
      </tbody>
    </table>
  </div>

  <script>
    // Simulación de datos que vienen del backend / Google Sheets
    const datos = [
      {
        fecha: "2025-09-29 10:30",
        asunto: "DERRAME DE AGUA EN PASILLO",
        lugar: "EDIFICIO A - PISO 2",
        descripcion: "SE OBSERVÓ UN CHARCO DE AGUA SIN SEÑALIZACIÓN.",
        recomendaciones: "COLOCAR SEÑALIZACIÓN Y LIMPIAR INMEDIATAMENTE.",
        reporta: "JUAN PÉREZ",
        imagenes: "https://drive.google.com/file/d/12345/view",
        estado: "PENDIENTE",
        acciones: ""
      },
      {
        fecha: "2025-09-28 15:45",
        asunto: "CABLE SUELTO EN OFICINA",
        lugar: "OFICINA 304",
        descripcion: "UN CABLE ELÉCTRICO ESTABA EN EL SUELO, RIESGO DE TROPIEZO.",
        recomendaciones: "REUBICAR EL CABLE Y ASEGURAR INSTALACIÓN.",
        reporta: "MARÍA LÓPEZ",
        imagenes: "https://drive.google.com/file/d/67890/view",
        estado: "EN PROCESO",
        acciones: "SE SOLICITÓ A MANTENIMIENTO LA CORRECCIÓN."
      }
    ];

    function cargarTabla() {
      const tbody = document.getElementById("tabla-datos");
      tbody.innerHTML = "";

      datos.forEach((d, index) => {
        const fila = document.createElement("tr");

        fila.innerHTML = `
          <td>${index + 1}</td>
          <td>${d.fecha}</td>
          <td>${d.asunto}</td>
          <td>${d.lugar}</td>
          <td>${d.descripcion}</td>
          <td>${d.recomendaciones}</td>
          <td>${d.reporta}</td>
          <td><span class="icono" onclick="window.open('${d.imagenes}', '_blank')">VER</span></td>
          <td>
            <select>
              <option value="PENDIENTE" ${d.estado === "PENDIENTE" ? "selected" : ""}>PENDIENTE</option>
              <option value="EN PROCESO" ${d.estado === "EN PROCESO" ? "selected" : ""}>EN PROCESO</option>
              <option value="SOLUCIONADO" ${d.estado === "SOLUCIONADO" ? "selected" : ""}>SOLUCIONADO</option>
            </select>
          </td>
          <td><textarea>${d.acciones}</textarea></td>
          <td><button>ACCIÓN</button></td>
        `;

        tbody.appendChild(fila);
      });
    }

    cargarTabla();
  </script>
</body>
</html>

